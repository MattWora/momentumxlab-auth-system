<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pro-4 | MomentumXLab</title>
  <link rel="stylesheet" href="style.css"/>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <section class="pro4-section">
    <div class="left-content">
      <h2>Key Features of ApexXAU Pro-4 for MT5 platform</h2>
      <ul class="feature-list">
        <li><strong>Multi-Signal Entry Logic:</strong> CCI, MACD, RSI + ADX threshold</li>
        <li><strong>Adaptive Exit Strategy:</strong> ATR-based trailing stop & dynamic TP</li>
        <li><strong>Intelligent Closure:</strong> Closes grouped positions at floating drawdown</li>
        <li><strong>Risk Adjustment:</strong> ADX-based modulation of entry & trailing</li>
        <li><strong>Zero-Redundancy Filtering:</strong> Prevents trade overlap for precision</li>
      </ul>

      <h3>Subscription Plans</h3>
      <table class="info-table">
        <thead>
          <tr><th>Plan</th><th>Price</th><th>Avg/Month</th><th>Discount</th></tr>
        </thead>
        <tbody>
          <tr><td>Monthly</td><td>$19.99</td><td>$19.99</td><td>—</td></tr>
          <tr><td>6-Month</td><td>$106.99</td><td>$17.83</td><td>~10.8%</td></tr>
          <tr><td>12-Month</td><td>$193.99</td><td>$16.17</td><td>~19.1%</td></tr>
        </tbody>
      </table>

      <div class="btn-group">
        <button class="pro4-checkout-btn" data-plan="monthly">Subscribe Monthly</button>
          Subscribe Monthly
        </button>
        <button class="pro4-checkout-btn" data-plan="6m">Subscribe 6 Months</button>
          Subscribe 6 Months
        </button>
        <button class="pro4-checkout-btn" data-plan="annual">Subscribe Annual</button>
          Subscribe 12 Months
        </button>
      </div>
    </div>

    <div class="right-content">
      <div class="mockup-wrapper">
        <img src="Pro4_CollectorEdition_whiteBG.png" alt="Pro-4 Mockup" />
        <p class="edition custom">
          Ideal for XAUUSDc with minimal starting capital (5,000 USDc).
        </p>
      </div>
    </div>
  </section>

  <!-- Firebase + SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>

  <script>
    // 1) Init Firebase
    firebase.initializeApp({
      apiKey: "AIzaSyDeUaFNrqo5DKQWuWz1kiru1MVOSuRHDmk",
      authDomain: "momentumxlab-37ce2.firebaseapp.com",
      projectId: "momentumxlab-37ce2",
      appId: "1:1234567890:web:abcdef123456"
    });
    const auth = firebase.auth();
    const AUTH_BASE = 'https://mattwora.github.io/momentumxlab-auth-system';

    // 2) ผูกทุกปุ่ม Subscribe ให้ตรวจ user ณ เวลาคลิก
    document.querySelectorAll('.pro4-checkout-btn').forEach(btn => {
      btn.addEventListener('click', async e => {
        e.preventDefault();
        const plan = btn.dataset.plan;
        const user = auth.currentUser;  // ตรวจสถานะล็อกอินปัจจุบัน

        if (!user) {
          // ยังไม่ล็อกอิน → เด้ง SweetAlert ให้ Login/Signup
          const result = await Swal.fire({
            title: 'Please Sign Up or Login',
            text: 'You must sign in before choosing a package.',
            icon: 'info',
            showDenyButton: true,
            confirmButtonText: 'Login',
            denyButtonText: 'Signup'
          });
          const me = encodeURIComponent(location.href);
          if (result.isConfirmed) {
            location.href = `${AUTH_BASE}/login.html?redirect=${me}`;
          } else if (result.isDenied) {
            location.href = `${AUTH_BASE}/signup.html?redirect=${me}`;
          }
        }
        else {
          // ล็อกอินแล้ว → ไป confirm-order.html
          location.href = `${AUTH_BASE}/confirm-order.html?plan=${plan}`;
        }
      });
    });
  </script>
</body>
</html>
